webpackJsonp([24],{XP8M:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login-form"},[o("el-header",{staticClass:"header",attrs:{height:"45px"}},[o("h2",{staticClass:"title"},[e._v("登录")]),e._v(" "),o("span",{staticClass:"pull-right"},[e._v("\n      没有账号？\n      "),o("router-link",{staticClass:"link",attrs:{to:"/registerForm"}},[e._v("点此注册")])],1)]),e._v(" "),o("div",{staticClass:"form"},[o("el-form",{ref:"loginForm",attrs:{model:e.loginForm,"status-icon":"",rules:e.rules}},[o("el-form-item",{attrs:{prop:"userAccount"}},[o("el-input",{attrs:{autocomplete:"on",placeholder:"请输入帐号","prefix-icon":"el-icon-user"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm("loginForm")}},model:{value:e.loginForm.userAccount,callback:function(t){e.$set(e.loginForm,"userAccount",t)},expression:"loginForm.userAccount"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"passWord"}},[o("el-input",{attrs:{type:"password","show-password":"",autocomplete:"off",placeholder:"请输入密码","prefix-icon":"el-icon-lock"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm("loginForm")}},model:{value:e.loginForm.passWord,callback:function(t){e.$set(e.loginForm,"passWord",t)},expression:"loginForm.passWord"}})],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-bottom":"12px"},attrs:{prop:"checkCode"}},[o("el-input",{staticStyle:{width:"62%"},attrs:{placeholder:"验证码","prefix-icon":"el-icon-position"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm("loginForm")}},model:{value:e.loginForm.checkCode,callback:function(t){e.$set(e.loginForm,"checkCode",t)},expression:"loginForm.checkCode"}}),e._v(" "),o("el-image",{staticClass:"check-code",staticStyle:{height:"40px"},attrs:{src:e.checkCodeUrl,title:"看不清，换一张"},on:{click:e.getCode}})],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-bottom":"10px"}},[o("el-checkbox",{model:{value:e.rememberMe,callback:function(t){e.rememberMe=t},expression:"rememberMe"}},[e._v("记住我")]),e._v(" "),o("router-link",{staticClass:"retrieve-password",attrs:{to:"/forgotPassword"}},[e._v("找回密码")])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-bottom":"10px"}},[o("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],staticClass:"submit",attrs:{type:"primary"},on:{click:function(t){return e.submitForm("loginForm")}}},[e._v("登录")])],1)],1),e._v(" "),o("div",{staticStyle:{width:"90%",margin:"0 auto","text-align":"center"}},[o("el-divider",[e._v("其他方式登录")]),e._v(" "),o("div",{staticClass:"my-icon"},[o("i",{staticClass:"iconfont iconqq qq",on:{click:e.qqLogin}}),e._v(" "),o("i",{staticClass:"iconfont iconweixin weixin",on:{click:e.weixinLogin}}),e._v(" "),o("i",{staticClass:"iconfont icondingding01 dingding",on:{click:e.dingLogin}})])],1)],1)],1)},staticRenderFns:[]};var n=o("VU/8")({name:"Login-Form",data:function(){return{checkCodeKey:null,checkCodeUrl:null,rememberMe:!0,loginForm:{userAccount:"",passWord:"",checkCode:"",checkCodeKey:""},rules:{userAccount:[{required:!0,message:"请输入帐号",trigger:"blur"}],passWord:[{required:!0,message:"请输入密码",trigger:"blur"}],checkCode:[{required:!0,message:"请输入验证码",trigger:"blur"}]}}},methods:{qqLogin:function(){this.$message.success("QQ登录")},weixinLogin:function(){this.$message.warning("微信登录")},dingLogin:function(){this.$message.info("钉钉登录")},getCode:function(){this.checkCodeUrl=this.$globalApi.getImageCode()},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.loginForm.checkCodeKey=t.$store.state.checkCodeKey,t.$loginApi.login(t.loginForm).then(function(e){t.$userApi.queryMyVip().then(function(e){t.$store.commit("saveVipInfo",e.data)}),t.$cookie.setToken(e.data.token),t.$store.commit("saveUserInfo",e.data.user),t.$notify({title:"成功",message:e.message,type:"success",offset:50}),t.$router.push("/homePage")}).catch(function(){t.loginForm.checkCode="",t.loginForm.password="",t.getCode()})})}},created:function(){this.getCode()}},i,!1,function(e){o("fO6C")},"data-v-5319cfe3",null);t.default=n.exports},fO6C:function(e,t){}});
//# sourceMappingURL=24.01ecffe9224adb501fc2.js.map