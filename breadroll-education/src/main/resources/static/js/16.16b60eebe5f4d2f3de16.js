webpackJsonp([16],{Kex5:function(e,t){},llp6:function(e,t){},mkg4:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"system-message"},[a("h2",{staticClass:"header"},[e._v("我的消息\n    "),a("el-button",{staticStyle:{position:"absolute",right:"25px"},attrs:{plain:"",size:"small"},on:{click:e.readAll}},[e._v("全部已读")])],1),e._v(" "),a("div",{staticClass:"message-container"},e._l(e.personalMessageData,function(t,s){return a("el-card",{key:s,staticClass:"message-card",attrs:{shadow:"hover"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("el-badge",{attrs:{"is-dot":!t.readState}},[a("span",{staticStyle:{"font-weight":"600"}},[a("i",{staticClass:"iconfont iconxinbaniconshangchuan-1"}),e._v(" "+e._s(t.title))])]),e._v(" "),a("span",{staticClass:"publish-time"},[e._v(e._s(t.publishTime)+"\n          "),a("el-link",{staticClass:"delete-link",attrs:{icon:"el-icon-delete",underline:!1},on:{click:function(a){return e.clearIt(t.messageId)}}})],1)],1),e._v(" "),a("p",{staticClass:"message-content",class:[t.url?"set-width":""],domProps:{innerHTML:e._s(t.content)}}),e._v(" "),t.url?a("div",{staticClass:"link"},[a("el-link",{staticStyle:{height:"20px"},attrs:{type:"success",target:"_blank",href:t.url}},[a("span",{on:{click:function(a){return e.readMe(t.messageId)}}},[e._v("\n            查看详情"),a("i",{staticClass:"el-icon-thumb"})])])],1):e._e()])}),1),e._v(" "),a("el-pagination",{staticClass:"page",attrs:{"current-page":e.queryData.pageNum,"page-sizes":[5,10,20,50],"page-size":e.queryData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.queryData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var n=a("VU/8")({name:"PersonalMessage",data:function(){return{personalMessageData:null,queryData:{pageNum:1,pageSize:5,total:0}}},methods:{handleSizeChange:function(e){this.queryData.pageSize=e,this.reqInfo()},handleCurrentChange:function(e){this.queryData.pageNum=e,this.reqInfo()},readAll:function(){var e=this;this.$userApi.readAllMyMessage().then(function(){e.reqInfo(),e.$store.commit("saveMessageState",!1)})},readMe:function(e){var t=this;this.$userApi.readMessage(e).then(function(){t.reqInfo(),t.$userApi.checkNewMessage().then(function(e){t.$store.commit("saveMessageState",e.data)})})},clearIt:function(e){var t=this;this.$confirm("确定清除此条消息?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$userApi.clearMyMessage(e).then(function(){t.reqInfo()})}).catch(function(){})},reqInfo:function(){var e=this;this.$userApi.queryMyMessage(this.queryData).then(function(t){e.personalMessageData=t.data.list,e.queryData.total=t.data.total})}},mounted:function(){this.reqInfo()}},s,!1,function(e){a("Kex5"),a("llp6")},"data-v-4a0a9470",null);t.default=n.exports}});
//# sourceMappingURL=16.16b60eebe5f4d2f3de16.js.map